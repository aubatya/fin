{% extends "base.html" %}
    {% block content %}

    <input type="checkbox" id="nav-toggle" hidden>
    <nav class="nav">
        <label for="nav-toggle" class="nav-toggle" onclick></label>
        <ul>
            <li><a href="profile">Профиль</a></li>
            <li><a href="add">Добавить операцию</a></li>
            <li><a href="diagram">Диаграмма расходов</a></li>
            <li><a href="history">История трат</a></li>
            <li><a href="head">Вернуться на главную страницу</a></li>
            <li><a href="logout">Выйти</a></li>
        </ul>
    </nav>

    <main role="main">
        <article style="transition: transform .3s; margin-left: 4%; margin-right: 4%; margin-top: 1%; padding: 5px;">
            <header>
                <h1>История ваших операций</h1>
                <hr>
            </header>

            <section>
                    <label for="filt" style="font-size: xx-large;">
                        <b>Фильтр</b>
                    </label>
                    <div style="width: 30%">
                        <form method="POST">

                            <div class="slide" style="margin-bottom: 2%; margin-top: 2%;" >
                                    <input class="form-check-input" type="checkbox" name = "check" id="vse" value = "True" style="display: inline-block;">
                                    <label for="vse">
                                        Показать операции за все время
                                    </label>
                                    <div style="margin-top: 2%; margin-bottom: 1%; ">
                                        <div style="font-size: large; font-weight: bold;">Выберите за какой промежуток:</div>
                                        <label for="time1" style="font-size: large;">
                                            Выберите начало периода:
                                        </label>
                                        <input type="date" name="time1" style="margin-bottom: 1%;">
                                        <br>

                                        <label for="time2" style="font-size: large;">
                                            Выберите конец периода:
                                        </label>
                                        <input type="date" name="time2" style="margin-bottom: 1%;">
                                        <br>
                                    </div>
                            </div>
                            <div style="margin-top: 2%; margin-bottom: 1%; ">
                                <div style="font-size: large; font-weight: bold;">Выберите тип операции:</div>
                                <input class="form-check-input" type="checkbox" id = "vav" name = "prof"  value = "+" style="display: inline-block;">
                                <label for="vav">
                                    Прибыль
                                </label>
                                <br>
                                <div class="slide2" style="margin-bottom: 2%; margin-top: 2%;" >
                                    <input class="form-check-input" type="checkbox" name = "ex" id="vave" value = "-" style="display: inline-block;">
                                    <label for="vave">
                                        Трата
                                    </label>
                                    <div class="box">
                                        <div class="slide3" style="margin-bottom: 2%; margin-top: 2%; " >
                                            <input class="form-check-input" type="checkbox" name = "all" id="vavee" value = "True" style="display: inline-block;">
                                            <label for="vavee">
                                                Все категории
                                            </label>
                                            <div style="margin-top: 2%; margin-bottom: 1%; ">
                                                <div style="font-size: large; font-weight: bold;">Выберите категорию</div>
                                                <input class="form-check-input" type="checkbox" name = "ex1" id="Супермаркеты" value = "Супермаркеты" style="display: inline-block;">
                                                <label for="Супермаркеты" style="display:flexbox;">
                                                    Супермаркеты
                                                </label>
                                                <input class="form-check-input" type="checkbox" name = "ex2" id="Развлечение" value = "Развлечение" style="display: inline-block;">
                                                <label for="Развлечение">
                                                    Развлечение
                                                </label>
                                                <input class="form-check-input" type="checkbox" name = "ex3" id="Рестораны" value = "Рестораны" style="display: inline-block;">
                                                <label for="Рестораны">
                                                    Рестораны
                                                </label>
                                                <input class="form-check-input" type="checkbox" name = "ex4" id="Переводы" value = "Переводы" style="display: inline-block;">
                                                <label for="Переводы">
                                                    Переводы
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                            </div>
                            </div>
                            <div>
                                <div style="font-size: large; font-weight: bold;">
                                    Укажите ограничение по величине операции:
                                </div>

                                <label for="min" style="font-size: large;">Введите минимум:</label>
                                <input type="number" name="min" style="margin-bottom: 1%;">
                                <br>

                                <label for="max" style="font-size: large;">Введите максимум:</label>
                                <input type="number" name="max">
                            </div>

                            <input class="btn btn-primary btn-sm" type="submit" name = "history" value="Подтвердить" style="margin-top: 2%;">
                        </form>
                    </div>
                <hr>
                <a href="{{ url_for('static', filename = 'resources/' + xlx)}}" download=""  class="btn btn-primary btn-sm">
                    <input class="btn btn-primary btn-sm" type="submit" name = "xlx_history" value="Скачать excel вариант">
                </a>
                <hr>
                <form method="POST">
                <input class="btn btn-primary btn-sm" type="submit" name = "del_history" value="Удалить выбранные операции">
                <input class="btn btn-primary btn-sm" type="submit" name = "base" value="Сделать выбранную операцию базовой">
                <input class="btn btn-primary btn-sm" type="submit" name = "del_base" value="Отменить базовую операцию">
                <hr>
                {% if base %}
                {{base[0]}}
                Эта операция выбрана базовой
                {% else %}
                Базовая операция не выбрана
                {% endif %}
                <hr>
                <div class="list-group">
                {% if oper %}
                {% for mes_oper, id in oper %}
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" name="{{id}}" value="{{id}}">
                    {{mes_oper}}
                </label>
                {% endfor %}
                {% else %}
                Вы не соверашали операции
                {% endif %}
                </div>
                </form>
            </section>

        </article>
    </main>
    {% endblock %}
